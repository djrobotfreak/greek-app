<div id="appHome" class="container" ng-init="hidden = {maxPageNumber: 5, currentPage: 0}; current = {maxPageNumber: 5, currentPage: 0};">
        
    <section id="statusContainer" class="row">
    
    <div id="orgLetters" class="col-xs-12 col-sm-3 hidden-xs">
       <section>
           <img class="orgLetters" src="{{$root.organization.image}}">
       </section>
    </div>
    <div id="upcomingEvents" ng-show="eventList.length" class="col-xs-12 col-sm-3 md-pull-right">
       
        <h2 class="page-header">Upcoming Events</h2>
        <section>
            <ul ng-show="eventList.length">
                <a ng-repeat="event in eventList = ($root.events | removePassedEvents:true |  limitTo: 3 | orderBy: 'time_start')" ng-href="#/app/events/{{event.tag}}">
                    <span>{{event.title}}</span><span> {{showDate(event.time_start, event.time_end)}}</span>
                </a>
            </ul>
        </section>
    </div>
       
    <div id="changeStatus" class="col-xs-12 col-sm-6">
       <h2 class="page-header">Current Status:   <button type="button" class="close" ng-click="clearStatus()" bs-tooltip="clearStatusTip" data-placement="left"><i class="fa fa-times"></i></button></h2>
       <section>
            <div class="col-xs-12">
            <form class="row" name="statusUpdate" id="statusUpdate" ng-submit="updateStatus(status)">
                <div class="input-group">
                  <input id="status" name="status" type="text" placeholder="update your status here" class="form-control" ng-model="status"  maxlength="140">
                  <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit"><i class="fa fa-check"></i></button>
                  </span>
                </div>
                <span id="count" ng-show="status.length">{{status.length}}/140</span>
            </form>
            </div>
            
        <span class="currentStatus preText" ng-show="$root.me.status.length">"{{$root.me.status}}"</span>
        </section>
    </div>
        
    </section>

    <section id="notifications">

        <ul>
            <li class="notification" ng-class="{new: notify.new, collapseOut: notify.garbage}" ng-click="openNotificationModal(notify)" ng-repeat="notify in $root.notifications | orderBy : '-timestamp' | startFrom:current.currentPage*current.maxPageNumber | limitTo: current.maxPageNumber">
                <div class="notificationContent">
                <button type="button" class="close" onclick="console.log(this)" ng-click="hideNotification(notify, this);$event.stopPropagation();" bs-tooltip="archiveTip" data-placement="left"><i class="fa fa-folder-open-o"></i></button>
                <span class="notificationTitle preText"><i class="fa fa-circle"></i>{{notify.title}}</span>
                    <span class="preText">{{notify.content | limitTo: 116}}<span ng-show="notify.content.length > 100">...</span></span>
                <span class="notificationSender" ng-show="notify.sender_name">sent by: {{notify.sender_name}}</span>
                </div>
            </li>
        </ul>
        
            <p class="noNotifications" style="width:100%; text-align:center;" ng-show="!$root.notifications.length">There are no new notifications!</p>
        <div class="pagerButtons">
                    <button class="previous btn btn-default btn-sm" ng-hide="current.currentPage == 0" ng-disabled="current.currentPage == 0" ng-click="current.currentPage=current.currentPage-1">&larr; Newer</button>
                    <button class="next btn btn-default btn-sm" ng-hide="current.currentPage >= $root.notifications.length/current.maxPageNumber - 1" ng-disabled="current.currentPage >= $root.notifications.length/current.maxPageNumber - 1" ng-click="current.currentPage=current.currentPage+1">Older &rarr;</button>
        </div>
        <button id="showHiddenButton" class="btn btn-block" data-toggle="collapse" ng-click="shown = !shown" ng-show="$root.hidden_notifications.length" data-target="#showHidden" ng-init="shown = false"><span ng-show="shown">Hide Archived</span><span ng-hide="shown">Show Archived</span></button>
    <section id="showHidden" class="collapse">
<!--       #TODO replace this with repeat for hidden notificaitons-->
       
<!--
       <list-thing ng-model="$root.hidden_notifications">
                <div class="notificationContent">
                <span class="notificationTitle">{{ngModel.title}}</span>
                    <span>{{ngModel.content | limitTo: 116}}<span ng-show="notify.content.length > 116">...</span></span>
                <span class="notificationSender" ng-show="notify.sender_name">sent by: {{ngModel.sender_name}}</span>
                </div>
       </list-thing>
       
-->
       
       
        <ul>
            <li class="notification" ng-class="" ng-click="openNotificationModal(notify)" ng-repeat="notify in $root.hidden_notifications | startFrom:hidden.currentPage*hidden.maxPageNumber | limitTo: hidden.maxPageNumber">
                <div class="notificationContent">
                <span class="notificationTitle">{{notify.title}}</span>
                    <span>{{notify.content | limitTo: 116}}<span ng-show="notify.content.length > 116">...</span></span>
                <span class="notificationSender" ng-show="notify.sender_name">sent by: {{notify.sender_name}}</span>
                </div>
            </li>
        </ul>
        
            <div class="pagerButtons">
            <button class="previous btn btn-default btn-sm" ng-disabled="hidden.currentPage == 0" ng-click="hidden.currentPage=hidden.currentPage-1">&larr; Newer</button>
            <button class="next btn btn-default btn-sm" ng-hide="hidden.currentPage >= $root.hidden_notifications.length/hidden.maxPageNumber - 1" ng-click="hidden.currentPage=hidden.currentPage+1">Older &rarr;</button>
            <button class="next btn btn-default btn-sm" ng-show="hidden.currentPage >= $root.hidden_notifications.length/hidden.maxPageNumber - 1" ng-disabled="noMoreHiddens" ng-click="checkForMoreHiddenNotifications($root.hidden_notifications, hidden.currentPage, hidden.maxPageNumber)"><span ng-show="working"><i class="fa fa-spinner fa-spin"></i></i></span><span ng-hide="working">Older &rarr;</span></button>
            </div>
            
    </section>
        
    </section>
</div>

<div class="modal fade" id="notificationModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">{{selectedNotification.title}}</h4>
      </div>
      <div class="modal-body">
        <p id="messageContent" class="preText" >{{selectedNotification.content}}</p>
        <br>
        <span class="notificationSender">sent by: {{selectedNotification.sender_name}}</span>
      </div>
      <div class="modal-footer">
        <a href="mailto:{{selectedNotificationUser.email}}" target="_blank" ng-show="selectedNotificationUser && selectedNotification.type == 'message'" class="btn btn-info pull-left"><i class="fa fa-envelope-o"></i></a>
        <a href="tel:{{selectedNotificationUser.phone}}" target="_blank" ng-show="selectedNotificationUser && selectedNotification.type == 'message'" class="btn btn-info pull-left"><i class="fa fa-phone"></i></a>
        <a type="button" class="btn btn-info" ng-show="selectedNotification.type == 'event'" ng-click="closeNotificationModal()" ng-href="{{selectedNotification.link}}">Go To Event</a>
        <a type="button" class="btn btn-info" ng-show="selectedNotification.type == 'poll'" ng-click="closeNotificationModal()" ng-href="{{selectedNotification.link}}">Go To Poll</a>
        <button type="button" class="btn btn-primary" ng-click="closeNotificationModal()">OK</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->