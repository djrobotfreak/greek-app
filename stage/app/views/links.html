<div class="container">
<h1 class="darkbg">Links<button id="newLinkButton" ng-click="openNewLinkModal()" ng-show="$root.checkPermissions('leadership')" class="btn btn-default pull-right">New Link <i class="fa fa-plus-circle"></i></button>
</h1>
	<ul>
		<li ng-repeat="group in groups">
			<h1 class="darkbg">group</h1>
			<span>
				<button ng-click="openDeleteGroupModal(group)" ng-show="$root.checkPermissions(leadership)" class="btn btn-danger btn-sm poll-right"><i class="fa fa-trash-o"></i></button>
				<button ng-click="openEditGroupModal(group)" ng-show="$root.checkPermissions(leadership)" class="btn btn-danger btn-sm poll-right"><i class="fa fa-edit"></i></button>
			</span>
			<ul>
				<li ng-repeat="link in links">
	           		<div class="row">
		                <div class="col-xs-12 col-sm-6">
		                <h3>{{link.title}}</h3>
		                </div>
		                <div class="col-xs-12 col-sm-6">
		                    <div class="pull-right" ng-show="$root.checkPermissions(leadership)">
		                        <button ng-click="openEditLinkModal(link)" class="btn btn-danger btn-sm"><i class="fa fa-edit"></i></button>
		                        <button ng-click="openDeleteLinkModal(link)" class="btn btn-danger btn-sm"><i class="fa fa-trash-o"></i></button>
		                    </div>
		                </div>
	            	</div>     
        		</li>
			</ul>
		</li>
	</ul>
	
</div>


<div class="modal fade" id="createGroupModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div>
      <div class="modal-body">
              <input type="text" ng-model="newGroupName">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" ng-click="createGroup(newGroupName)">Delete</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="deleteGroupModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div>
      <div class="modal-body">
              <p>Delete group {{selectedGroup}}?</p>
              <p>This will also delete all links within this group.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" ng-click="deleteGroup(selectedGroup)">Delete</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="editGroupModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div>
      <div class="modal-body">
              <input type="text" ng-model="newGroupName">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" ng-click="editGroup(selectedGroup, newGroupName)">Delete</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal fade" id="newLinkModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">New Link</h4>
      </div>
      <form id="newLinkForm" name="newLinkForm" class="form-horizontal" ng-submit="createLink(newTitle, newLink, newGroup == 'new_group_listing' ? newGroupValue : newGroup)" novalidate>
      <div class="modal-body">
	    <div class="form-group">
	        <label for="newTitle" class="col-sm-2 control-label">Title</label>
	        <div class="col-sm-10">
	          <input type="text" class="form-control" id="newTitle" name="newTitle" ng-model="newTitle" required>
	        </div>
	    </div>
	    <div class="form-group">
	        <label for="newLink" class="col-sm-2 control-label">Link</label>
	        <div class="col-sm-10">
	          <input type="text" class="form-control" id="newLink" name="newLink" ng-model="newLink" required>
	        </div>
	    </div>

	    <div class="form-group">
	        <label for="newGroup" class="col-sm-2 control-label">Group</label>
	        <div class="col-sm-10">
	        <select class="form-control" id="newGroup" name="newGroup" ng-model="newGroup" required>
	        	<option ng-repeat="group in groups">{{group}}</option>
	        	<option value="new_group_listing">New</option>
	        </select>
	    	</div>
    	</div>

	    <div class="form-group" ng-show="newGroup == 'new_group_listing'">
	        <label for="newTitle" class="col-sm-2 control-label">New Group</label>
	        <div class="col-sm-10">
	          <input type="text" class="form-control" id="newGroupValue" name="newGroupValue" ng-model="newGroupValue" ng-required="newGroup === 'new_group_listing'">
	        </div>
	    </div>
      
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="submit" ng-disabled="!newLinkForm.$valid" class="btn btn-primary">Save</button>
      </div>
      </form> 
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal fade" id="deleteLinkModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div>
      <div class="modal-body">
              <p>Are you sure you want to delete the link {{selectedLink.title}}?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" ng-click="deleteLink(selectedLink.key)">Delete</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<div class="modal fade" id="editLinkModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Edit Link</h4>
      </div>
      <div class="modal-body">
              <input type="text" ng-model="newTitle">
              <input type="text" ng-model="newLink">
              <select ng-model="newGroup" ng-options="group for group in groups">
                <option value="new_group_listing">New</option>
              </select>
              <input ng-show="newGroup == 'new_group_listing'" type="text" ng-model="newGroupValue">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" ng-click="deleteLink(selectedLink.key)" data-dismiss="modal">Delete Link</button>
        <button type="button" class="btn btn-primary" ng-click="editLink(selectedLink.key, newTitle, newLink, newGroupValue||newGroup)">Save</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->